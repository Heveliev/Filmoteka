!function(){var e={moviesList:document.querySelector(".films__list")};function t(t){return e.moviesList.innerHTML=t.map((function(e){return"<li id='".concat(e.id,'\' class="films__card">\n            <div class="films__overflow-wrapper">\n              <img src="').concat((t=e.poster_path,t?"https://image.tmdb.org/t/p/w500/".concat(t):"https://i.postimg.cc/KYV47028/no-poster-available.jpg"),'"  alt="film poster" class="films__picture" />\n              <div class="films__overlay">\n                <p class="films__trailer-text">Watch trailer</p>\n                <img scr alt class="films__trailer-icon">\n              </div>\n            </div>\n            <p class="films__title">').concat(e.title,'</p>\n            <div class="films__details">\n              <p class="films__genres film-font-style">').concat(function(e){try{for(var t=localStorage.getItem("saved-genres"),r=JSON.parse(t),n=[],a=e.release_date.slice(0,4),o=0;o<e.genre_ids.length;o++)n.push(r[e.genre_ids[o]]);var i="";return i=n.length>2?n.splice(0,2).join(", ")+", Other":n.join(", "),0!==e.genre_ids.length||e.release_date?0===e.genre_ids.length&&e.release_date?a:0===e.genre_ids.length||e.release_date?i+" | "+a:i:""}catch(e){throw new Error(e)}}(e),'</p>\n              <span class="films__rate">').concat(e.vote_average.toFixed(1),"</span>\n            </div>\n          </li>");var t})).join("")}var r={loader:document.querySelector(".loader")},n="saved-data";function a(){localStorage.removeItem(n)}function o(){r.loader.classList.remove("page-load"),r.loader.classList.add("hide")}var i=document.querySelector(".watched-films"),l=document.querySelector(".queue-films"),c=document.querySelector(".button-list"),s=document.querySelector(".films__list"),d=document.querySelector(".logo-link"),m="watched-films",u="queue-films";null===localStorage.getItem(m)&&(localStorage.setItem(m,JSON.stringify([])),o()),null===localStorage.getItem(u)&&(localStorage.setItem(u,JSON.stringify([])),o());var f="queue-films";l.classList.add("current-page");try{var v=localStorage.getItem(f),g=JSON.parse(v);if(g.length)try{t(g),o()}catch(e){p(f),o()}else p(f),o()}catch(e){throw new Error(e)}function _(e){e.preventDefault();try{(function(e){e===i.id&&(l.classList.remove("current-page"),i.classList.add("current-page"),l.removeAttribute("disabled"),i.setAttribute("disabled","disabled"));e===l.id&&(i.classList.remove("current-page"),l.classList.add("current-page"),i.removeAttribute("disabled"),l.setAttribute("disabled","disabled"))})(f=e.target.id);var r=localStorage.getItem(f),n=JSON.parse(r);if(n.length)try{t(n)}catch(e){p(f)}else p(f)}catch(e){throw new Error(e)}}function p(e){return s.innerHTML='\n  <img src="https://kartinkof.club/uploads/posts/2022-03/1648361803_4-kartinkof-club-p-mem-obezyana-smotrit-v-storonu-5.jpg" alt="monkey" width="400" height="200">\n  <p>Opss... you haven\'t added any movies to ('.concat(e,")</p>\n")}d.removeEventListener("click",a),d.addEventListener("click",a),c.removeEventListener("click",_),c.addEventListener("click",_);var h={filmCard:document.querySelector(".films__list"),backdrop:document.querySelector(".backdrop-modal-film"),filmRendering:document.querySelector(".film-render-markup")},b=document.querySelector("#js-libr"),w=document.querySelector("#queue-films"),y=document.querySelector("#watched-films");function S(e){if("IMG"===e.target.nodeName){h.backdrop.classList.remove("is-hidden"),document.body.style.overflow="hidden";var r=e.target.closest("li").id;try{var n=JSON.parse(localStorage.getItem("saved-movies")).find((function(e){return e.id===Number(r)}));a=n,h.filmRendering.innerHTML='\n        <div class="modal-img-wrapper">\n          <img src="https://image.tmdb.org/t/p/w500/'.concat(a.poster_path,'" alt="film-poster" />\n        </div>\n        <div class="modal__wrapper">\n          <h2 class="modal__film-title">').concat(a.title,'</h2>\n          <table class="modal__table">\n            <tr class="modal__table-row">\n              <td class="modal__first-column">Vote / Votes</td>\n              <td>\n                <div class="modal__vote-wrapper">\n                  <p class="modal__vote">').concat(a.vote_average.toFixed(1),'</p>\n                  <p>/</p>\n                  <p class="modal__votes">').concat(a.vote_count,'</p>\n                </div>\n              </td>\n            </tr>\n            <tr class="modal__table-row">\n              <td class="modal__first-column">Popularity</td>\n              <td>').concat(Math.round(10*a.popularity)/10,'</td>\n            </tr>\n            <tr class="modal__table-row">\n              <td class="modal__first-column">Original Title</td>\n              <td>').concat(a.original_title,'</td>\n            </tr>\n            <tr class="modal__table-row">\n              <td class="modal__first-column">Genre</td>\n              <td>').concat(L(a.genre_ids),'</td>\n            </tr>\n          </table>\n          <div>\n            <h3 class="modal__about-title">About</h3>\n            <p class="modal__about-film">\n              ').concat(a.overview,'\n            </p>\n          </div>\n          <div class="modal__buttons">\n            <button class="modal-btn btn-watched">').concat(k(a),'</button>\n            <button class="modal-btn btn-queue">').concat(q(a),"</button>\n          </div>\n        </div>"),L(n.genre_ids),function(e){var r=document.querySelector(".btn-watched"),n=document.querySelector(".btn-queue"),a="watched-films",o="queue-films";function i(){try{var n=JSON.parse(localStorage.getItem("watched-films"))||[];n.find((function(t){return t.id===e.id}))?n=n.filter((function(t){return t.id!==e.id})):n.push(e),localStorage.setItem(a,JSON.stringify(n)),r.textContent=k(e),b.classList.contains("current")&&y.classList.contains("current-page")&&t(n)}catch(e){throw new Error(e)}}function l(){try{var r=JSON.parse(localStorage.getItem("queue-films"))||[];r.find((function(t){return t.id===e.id}))?r=r.filter((function(t){return t.id!==e.id})):r.push(e),localStorage.setItem(o,JSON.stringify(r)),n.textContent=q(e),b.classList.contains("current")&&w.classList.contains("current-page")&&t(r)}catch(e){throw new Error(e)}}r.removeEventListener("click",i),n.removeEventListener("click",l),r.addEventListener("click",i),n.addEventListener("click",l)}(n)}catch(e){throw new Error(e)}document.removeEventListener("click",E),window.removeEventListener("keydown",E),document.addEventListener("click",E),window.addEventListener("keydown",E)}var a}function E(e){(e.target.matches(".modal__close-btn")||e.target.matches(".modal__close-btn-icon")||e.target.matches(".modal__close-btn-icon-svg")||e.target.matches(".backdrop-modal-film")||"Escape"===e.code)&&(h.backdrop.classList.add("is-hidden"),document.body.style.overflow="auto",h.filmRendering.innerHTML="")}function L(e){try{var t=JSON.parse(localStorage.getItem("saved-genres"));return e.map((function(e){return t[e]})).join(", ")}catch(e){throw new Error(e)}}function k(e){try{return(JSON.parse(localStorage.getItem("watched-films"))||[]).find((function(t){return t.id===e.id}))?"REMOVE FROM WATCHED":"ADD TO WATCHED"}catch(e){throw new Error(e)}}function q(e){try{return(JSON.parse(localStorage.getItem("queue-films"))||[]).find((function(t){return t.id===e.id}))?"REMOVE FROM QUEUE":"ADD TO QUEUE"}catch(e){throw new Error(e)}}h.filmCard.removeEventListener("click",S),h.filmCard.addEventListener("click",S)}();
//# sourceMappingURL=library.231647b4.js.map
