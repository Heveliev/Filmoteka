{"mappings":"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","sources":["src/js/renderQueueWatchedFilms/renderQueueWachedFilms.js"],"sourcesContent":["import { renderMoviesCards } from '../createMoviesMarkup/renderMoviesCards';\nimport {\n  hidePageLoadSpinner,\n  removeLocalData,\n  showLoadSpinner,\n  hideLoadSpinner,\n  scrollToTop,\n} from '../common/common';\nlet globalCurrentPage = 0;\nconst watched = document.querySelector('.watched-films');\nconst queue = document.querySelector('.queue-films');\nconst btnList = document.querySelector('.button-list');\nconst librList = document.querySelector('.films__list');\nconst logo = document.querySelector('.logo-link');\nconst paginationBox = document.querySelector('.page-number__list');\n\nconst WATCHED_KEY = 'watched-films';\nconst QUEUE_KEY = 'queue-films';\n\nif (localStorage.getItem(WATCHED_KEY) === null) {\n  localStorage.setItem(WATCHED_KEY, JSON.stringify([]));\n  hidePageLoadSpinner();\n}\n\nif (localStorage.getItem(QUEUE_KEY) === null) {\n  localStorage.setItem(QUEUE_KEY, JSON.stringify([]));\n  hidePageLoadSpinner();\n}\n\nlet key = 'queue-films';\nqueue.classList.add('current-page');\nconst resp = localStorage.getItem(key);\nlet parseResp = JSON.parse(resp);\n\nlogo.addEventListener('click', removeLocalData);\n\nif (!parseResp.length) {\n  fooError(key);\n  hidePageLoadSpinner();\n} else {\n  try {\n    const data = createDataToRender(parseResp);\n\n    console.log(data.results);\n\n    renderMoviesCards(data.results);\n    renderLibraryPagination(data.page, data.totalPages);\n\n    paginationBox.removeEventListener('click', handlerLibraryPagination);\n    paginationBox.addEventListener('click', handlerLibraryPagination);\n\n    hidePageLoadSpinner();\n  } catch (error) {\n    fooError(key);\n    hidePageLoadSpinner();\n  }\n}\n\nbtnList.addEventListener('click', onBtnClick);\n\nexport function onBtnClick(e) {\n  e.preventDefault();\n  key = e.target.id;\n  console.dir(key);\n  selectCurrentPage(key);\n  const resp = localStorage.getItem(key);\n  parseResp = JSON.parse(resp);\n\n  if (!parseResp.length) {\n    fooError(key);\n  } else {\n    try {\n      const data = createDataToRender(parseResp);\n      console.log(data.results);\n      renderMoviesCards(data.results);\n      renderLibraryPagination(data.page, data.totalPages);\n\n      paginationBox.removeEventListener('click', handlerLibraryPagination);\n      paginationBox.addEventListener('click', handlerLibraryPagination);\n\n      hidePageLoadSpinner();\n    } catch (error) {\n      fooError(key);\n      hidePageLoadSpinner();\n    }\n  }\n}\n\nfunction fooError(key) {\n  return (librList.innerHTML = `\n  <img src=\"https://kartinkof.club/uploads/posts/2022-03/1648361803_4-kartinkof-club-p-mem-obezyana-smotrit-v-storonu-5.jpg\" alt=\"monkey\" width=\"400\" height=\"200\">\n  <p>Opss... you haven't added any movies to (${key})</p>\n`);\n}\n\nfunction selectCurrentPage(id) {\n  if (id === watched.id) {\n    queue.classList.remove('current-page');\n    watched.classList.add('current-page');\n    queue.removeAttribute('disabled');\n    watched.setAttribute('disabled', 'disabled');\n  }\n\n  if (id === queue.id) {\n    watched.classList.remove('current-page');\n    queue.classList.add('current-page');\n    watched.removeAttribute('disabled');\n    queue.setAttribute('disabled', 'disabled');\n  }\n}\n\nfunction createDataToRender(data, pageNum = 1) {\n  const dataLength = data.length;\n  const resultsArr = [];\n\n  for (let i = (pageNum - 1) * 20; i < (pageNum - 1) * 20 + 20; i++) {\n    if (!data[i]) {\n      continue;\n    }\n    resultsArr.push(data[i]);\n  }\n\n  const objToRender = {\n    results: resultsArr,\n    totalPages: Math.ceil(dataLength / 20),\n    page: pageNum,\n  };\n\n  return objToRender;\n}\n\nfunction handlerLibraryPagination(evt) {\n  function renderNewMoviesPage(pageNum) {\n    showLoadSpinner();\n    const data = createDataToRender(parseResp, pageNum);\n    console.log(data.results);\n    renderMoviesCards(data.results);\n    scrollToTop();\n    renderLibraryPagination(data.page, data.total_pages);\n    hideLoadSpinner();\n    console.log(pageNum);\n  }\n  if (evt.target.nodeName !== 'LI') {\n    return;\n  }\n  if (evt.target.textContent === '...') {\n    return;\n  }\n  if (evt.target.textContent === 'ðŸ¡¸') {\n    renderNewMoviesPage((globalCurrentPage -= 1));\n    return;\n  }\n  if (evt.target.textContent === 'ðŸ¡º') {\n    renderNewMoviesPage((globalCurrentPage += 1));\n    return;\n  }\n  const page = evt.target.textContent;\n  renderNewMoviesPage(page);\n}\n\nfunction renderLibraryPagination(currentPage, allPages) {\n  let markup = '';\n  let beforeTwoPage = currentPage - 2;\n  let beforePage = currentPage - 1;\n  let afterPage = currentPage + 1;\n  let afterTwoPage = currentPage + 2;\n  globalCurrentPage = currentPage;\n\n  if (currentPage > 1) {\n    markup += `<li class=\"page-number__item arrows\">&#129144;</li>`;\n    markup += `<li class=\"page-number__item number\">1</li>`;\n  }\n\n  if (currentPage > 4) {\n    markup += `<li class=\"page-number__item\">...</li>`;\n  }\n\n  if (currentPage > 3) {\n    markup += `<li class=\"page-number__item number\">${beforeTwoPage}</li>`;\n  }\n\n  if (currentPage > 2) {\n    markup += `<li class=\"page-number__item number\">${beforePage}</li>`;\n  }\n\n  markup += `<li class=\"page-number__item current_page number\"><b>${currentPage}</b></li>`;\n\n  if (allPages - 1 > currentPage) {\n    markup += `<li class=\"page-number__item number\">${afterPage}</li>`;\n  }\n\n  if (allPages - 2 > currentPage) {\n    markup += `<li class=\"page-number__item number\">${afterTwoPage}</li>`;\n  }\n\n  if (allPages - 3 > currentPage) {\n    markup += `<li class=\"page-number__item\">...</li>`;\n  }\n\n  if (allPages > currentPage) {\n    markup += `<li class=\"page-number__item number\">${allPages}</li>`;\n    markup += `<li class=\"page-number__item arrows\">&#129146;</li>`;\n  }\n\n  paginationBox.innerHTML = markup;\n}\n"],"names":["$98CTD","parcelRequire","$14dc96e71a332ac5$var$globalCurrentPage","$14dc96e71a332ac5$var$watched","document","querySelector","$14dc96e71a332ac5$var$queue","$14dc96e71a332ac5$var$btnList","$14dc96e71a332ac5$var$librList","$14dc96e71a332ac5$var$logo","$14dc96e71a332ac5$var$paginationBox","$14dc96e71a332ac5$var$WATCHED_KEY","$14dc96e71a332ac5$var$QUEUE_KEY","localStorage","getItem","setItem","JSON","stringify","$v4drH","hidePageLoadSpinner","$14dc96e71a332ac5$var$key","classList","add","$14dc96e71a332ac5$var$resp","$14dc96e71a332ac5$var$parseResp","parse","addEventListener","removeLocalData","length","$14dc96e71a332ac5$var$data","$14dc96e71a332ac5$var$createDataToRender","console","log","results","renderMoviesCards","$14dc96e71a332ac5$var$renderLibraryPagination","page","totalPages","removeEventListener","$14dc96e71a332ac5$var$handlerLibraryPagination","error","$14dc96e71a332ac5$var$fooError","key1","innerHTML","concat","data","pageNum","arguments","dataLength","resultsArr","i","push","objToRender","Math","ceil","evt","renderNewMoviesPage","showLoadSpinner","scrollToTop","total_pages","hideLoadSpinner","target","nodeName","textContent","currentPage","allPages","markup","beforePage","afterPage","afterTwoPage","e","preventDefault","id","dir","remove","removeAttribute","setAttribute","$14dc96e71a332ac5$var$selectCurrentPage","resp1"],"version":3,"file":"library.544dbc57.js.map"}