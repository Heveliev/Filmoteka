!function(){var e={moviesList:document.querySelector(".films__list"),form:document.querySelector(".header-form"),failureMassege:document.querySelector(".js-failure-massege"),paginationBox:document.querySelector(".page-number__list"),backdrop:document.querySelector(".backdrop-modal-film"),closeBtn:document.querySelector(".modal__close-btn"),filmRendering:document.querySelector(".film-render-markup")};function t(t){return e.moviesList.innerHTML=t.map((function(e){return"<li id='".concat(e.id,'\' class="films__card">\n          <div class="films__overflow-wrapper">\n            <img src="').concat((t=e.poster_path,t?"https://image.tmdb.org/t/p/w500/".concat(t):"https://i.postimg.cc/KYV47028/no-poster-available.jpg"),'"  alt="film poster" class="films__picture" />\n              <div class="films__overlay">\n              <p class="films__trailer-text">Watch trailer</p>\n              \x3c!-- <img src="" alt="test" class="films__trailer-icon"> --\x3e\n            </div>\n          </div>\n          <p class="films__title">').concat(e.title,'</p>\n          <div class="films__details">\n            <p class="films__genres film-font-style">').concat(function(e){for(var t=localStorage.getItem("saved-genres"),n=JSON.parse(t),a=[],r=e.release_date.slice(0,4),s=0;s<e.genre_ids.length;s++)a.push(n[e.genre_ids[s]]);var i="";i=a.length>2?a.splice(0,2).join(", ")+", Other":a.join(", ");return 0!==e.genre_ids.length||e.release_date?0===e.genre_ids.length&&e.release_date?r:0===e.genre_ids.length||e.release_date?i+" | "+r:i:""}(e),'</p>\n            <span class="films__rate">').concat(e.vote_average.toFixed(1),"</span>\n          </div>\n        </li>");var t})).join("")}var n=document.querySelector(".watched-films"),a=document.querySelector(".queue-films"),r=document.querySelector(".button-list"),s="queue-films";a.classList.add("current-page");var i=localStorage.getItem(s),o=JSON.parse(i);if(o.length)try{t(o)}catch(e){l(s)}else l(s);function l(t){return e.moviesList.innerHTML='\n  <img src="https://kartinkof.club/uploads/posts/2022-03/1648361803_4-kartinkof-club-p-mem-obezyana-smotrit-v-storonu-5.jpg" alt="monkey" width="400" height="200">\n  <p>Opss... you haven\'t added any movies to '.concat(t,"</p>\n")}function c(t){(t.target.matches(".modal__close-btn")||t.target.matches(".modal__close-btn-icon")||t.target.matches(".modal__close-btn-icon-svg")||t.target.matches(".backdrop-modal-film")||"Escape"===t.code)&&(e.backdrop.classList.add("is-hidden"),document.body.style.overflow="auto",e.filmRendering.innerHTML="")}function d(e){var t=JSON.parse(localStorage.getItem("saved-genres"));return e.map((function(e){return t[e]})).join(", ")}function m(e){return(JSON.parse(localStorage.getItem("watched-films"))||[]).find((function(t){return t.id===e.id}))?"REMOVE FROM WATCHED":"ADD TO WATCHED"}function u(e){return(JSON.parse(localStorage.getItem("queue-films"))||[]).find((function(t){return t.id===e.id}))?"REMOVE FROM QUEUE":"ADD TO QUEUE"}r.addEventListener("click",(function(e){e.preventDefault(),s=e.target.id,console.dir(s),function(e){e===n.id&&(a.classList.remove("current-page"),n.classList.add("current-page"),a.removeAttribute("disabled"),n.setAttribute("disabled","disabled"));e===a.id&&(n.classList.remove("current-page"),a.classList.add("current-page"),n.removeAttribute("disabled"),a.setAttribute("disabled","disabled"))}(s);var r=localStorage.getItem(s),i=JSON.parse(r);if(i.length)try{t(i)}catch(e){l(s)}else l(s)})),e.moviesList.addEventListener("click",(function(t){e.backdrop.classList.remove("is-hidden"),document.body.style.overflow="hidden";var n=t.target.closest("li").id,a=JSON.parse(localStorage.getItem("saved-movies")).find((function(e){return e.id===Number(n)}));r=a,e.filmRendering.innerHTML='\n        <div class="modal-img-wrapper">\n          <img src="https://image.tmdb.org/t/p/w500/'.concat(r.poster_path,'" alt="film-poster" />\n        </div>\n        <div class="modal__wrapper">\n          <h2 class="modal__film-title">').concat(r.title,'</h2>\n          <table class="modal__table">\n            <tr class="modal__table-row">\n              <td class="modal__first-column">Vote / Votes</td>\n              <td>\n                <div class="modal__vote-wrapper">\n                  <p class="modal__vote">').concat(r.vote_average,'</p>\n                  <p>/</p>\n                  <p class="modal__votes">').concat(r.vote_count,'</p>\n                </div>\n              </td>\n            </tr>\n            <tr class="modal__table-row">\n              <td class="modal__first-column">Popularity</td>\n              <td>').concat(Math.round(10*r.popularity)/10,'</td>\n            </tr>\n            <tr class="modal__table-row">\n              <td class="modal__first-column">Original Title</td>\n              <td>').concat(r.original_title,'</td>\n            </tr>\n            <tr class="modal__table-row">\n              <td class="modal__first-column">Genre</td>\n              <td>').concat(d(r.genre_ids),'</td>\n            </tr>\n          </table>\n          <div>\n            <h3 class="modal__about-title">About</h3>\n            <p class="modal__about-film">\n              ').concat(r.overview,'\n            </p>\n          </div>\n          <div class="modal__buttons">\n            <button class="modal-btn btn-watched">').concat(m(r),'</button>\n            <button class="modal-btn btn-queue">').concat(u(r),"</button>\n          </div>\n        </div>"),d(a.genre_ids),function(e){var t=document.querySelector(".btn-watched"),n=document.querySelector(".btn-queue"),a="watched-films",r="queue-films";function s(){var n=JSON.parse(localStorage.getItem("watched-films"))||[];n.find((function(t){return t.id===e.id}))?n=n.filter((function(t){return t.id!==e.id})):n.push(e),localStorage.setItem(a,JSON.stringify(n)),t.textContent=m(e)}function i(){var t=JSON.parse(localStorage.getItem("queue-films"))||[];t.find((function(t){return t.id===e.id}))?t=t.filter((function(t){return t.id!==e.id})):t.push(e),localStorage.setItem(r,JSON.stringify(t)),n.textContent=u(e)}t.addEventListener("click",s),n.addEventListener("click",i)}(a),document.addEventListener("click",c),window.addEventListener("keydown",c);var r}))}();
//# sourceMappingURL=library.c202a01c.js.map
