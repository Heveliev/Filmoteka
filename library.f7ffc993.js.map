{"mappings":"gfAAA,IAWIA,EAXJC,EAAAC,EAAA,S,aAYMC,G,aAAUC,SAASC,cAAc,mBACjCC,EAAQF,SAASC,cAAc,gBAC/BE,EAAUH,SAASC,cAAc,gBACjCG,EAAaJ,SAASC,cAAc,sBACpCI,EAAWL,SAASC,cAAc,gBAClCK,EAAON,SAASC,cAAc,cAC9BM,EAAgBP,SAASC,cAAc,sBAEvCO,EAAc,gBACdC,EAAY,cAEwB,OAAtCC,aAAaC,QAAQH,KACvBE,aAAaE,QAAQJ,EAAaK,KAAKC,UAAU,MACjD,EAAAC,EAAAC,wBAGsC,OAApCN,aAAaC,QAAQF,KACvBC,aAAaE,QAAQH,EAAWI,KAAKC,UAAU,MAC/C,EAAAC,EAAAC,wBAGF,IAAIC,EAAM,cAEVf,EAAMgB,UAAUC,IAAI,gBACpB,IACEC,IACA,IAAMC,EAAOX,aAAaC,QAAQM,GAEpC,IADCrB,EAAYiB,KAAKS,MAAMD,IACTE,OAMb,IACE,IAAMC,EAAOC,mBAAmB7B,GAChCwB,KAEA,EAAAvB,EAAA6B,mBAAkBF,EAAKG,SACvBC,wBAAwBJ,EAAKK,KAAML,EAAKM,YAExCvB,EAAcwB,oBAAoB,QAASC,0BAC3CzB,EAAc0B,iBAAiB,QAASD,2BAExC,EAAAjB,EAAAC,sB,CAIA,MAAOkB,GACPC,IACAC,IACAC,EAASpB,IACT,EAAAF,EAAAC,sB,MAvBFmB,IACAC,IACAC,EAASpB,IACT,EAAAF,EAAAC,sB,CAuBA,MAAOkB,GACP,MAAM,IAAII,MAAMJ,E,CAUX,SAASK,EAAWC,GACzBA,EAAEC,iBAkDJ,SAA2BC,GACrBA,IAAO3C,EAAQ2C,KACjBxC,EAAMgB,UAAUyB,OAAO,gBACvB5C,EAAQmB,UAAUC,IAAI,gBACtBjB,EAAM0C,gBAAgB,YACtB7C,EAAQ8C,aAAa,WAAY,aAG/BH,IAAOxC,EAAMwC,KACf3C,EAAQmB,UAAUyB,OAAO,gBACzBzC,EAAMgB,UAAUC,IAAI,gBACpBpB,EAAQ6C,gBAAgB,YACxB1C,EAAM2C,aAAa,WAAY,Y,CA5DjCC,CADA7B,EAAMuB,EAAEO,OAAOL,IAEf,IACE,IAAMM,EAAOtC,aAAaC,QAAQM,GAGpC,IAFArB,EAAYiB,KAAKS,MAAM0B,IAERzB,OAKb,IACEH,IACA,IAAM6B,EAAOxB,mBAAmB7B,IAChC,EAAAC,EAAA6B,mBAAkBuB,EAAKtB,SACvBC,wBAAwBqB,EAAKpB,KAAMoB,EAAKnB,YAExCvB,EAAcwB,oBAAoB,QAASC,0BAC3CzB,EAAc0B,iBAAiB,QAASD,2BAExC,EAAAjB,EAAAC,sB,CACA,MAAOkB,GACPC,IACAC,IACAC,EAASpB,IACT,EAAAF,EAAAC,sB,MAlBFmB,IACAC,IACAC,EAASpB,E,CAmBT,MAAOiC,GACP,MAAM,IAAIZ,MAAMY,E,EAIpB,SAASd,IACP7B,EAAc4C,UAAY,E,CAE5B,SAAS/B,IACPhB,EAAW+C,UAAY,E,CAEzB,SAAShB,IACP9B,EAAS8C,UAAY,E,CAEvB,SAASd,EAASe,GAChB,OAAQhD,EAAW+C,UAAY,mPAE6CE,OAAJD,EAAI,U,CAtD9E9C,EAAKyB,oBAAoB,QAAShB,EAAAuC,iBAClChD,EAAK2B,iBAAiB,QAASlB,EAAAuC,iBAG/BnD,EAAQ4B,oBAAoB,QAASQ,GACrCpC,EAAQ8B,iBAAiB,QAASM,G","sources":["src/js/renderQueueWatchedFilms/renderQueueWachedFilms.js"],"sourcesContent":["import { renderMoviesCards } from '../createMoviesMarkup/renderMoviesCards';\n\nimport { hidePageLoadSpinner, removeLocalData } from '../common/common';\nimport {\n  hidePageLoadSpinner,\n  removeLocalData,\n  showLoadSpinner,\n  hideLoadSpinner,\n  scrollToTop,\n} from '../common/common';\nlet globalCurrentPage = 0;\nlet parseResp;\nconst watched = document.querySelector('.watched-films');\nconst queue = document.querySelector('.queue-films');\nconst btnList = document.querySelector('.button-list');\nconst librNoFilm = document.querySelector('.js-no_films__list');\nconst librList = document.querySelector('.films__list');\nconst logo = document.querySelector('.logo-link');\nconst paginationBox = document.querySelector('.page-number__list');\n\nconst WATCHED_KEY = 'watched-films';\nconst QUEUE_KEY = 'queue-films';\n\nif (localStorage.getItem(WATCHED_KEY) === null) {\n  localStorage.setItem(WATCHED_KEY, JSON.stringify([]));\n  hidePageLoadSpinner();\n}\n\nif (localStorage.getItem(QUEUE_KEY) === null) {\n  localStorage.setItem(QUEUE_KEY, JSON.stringify([]));\n  hidePageLoadSpinner();\n}\n\nlet key = 'queue-films';\n\nqueue.classList.add('current-page');\ntry {\n  clearError();\n  const resp = localStorage.getItem(key);\n parseResp = JSON.parse(resp);\nif (!parseResp.length) {\n  clearList()\n  clearPagination();\n  fooError(key);\n  hidePageLoadSpinner();\n} else {\n  try {\n    const data = createDataToRender(parseResp);\n    clearError();\n\n    renderMoviesCards(data.results);\n    renderLibraryPagination(data.page, data.totalPages);\n\n    paginationBox.removeEventListener('click', handlerLibraryPagination);\n    paginationBox.addEventListener('click', handlerLibraryPagination);\n\n    hidePageLoadSpinner();\n\n\n\n  } catch (error) {\n    clearList()\n    clearPagination();\n    fooError(key);\n    hidePageLoadSpinner();\n  }\n}\n} catch (error) {\n  throw new Error(error);\n}\n\nlogo.removeEventListener('click', removeLocalData);\nlogo.addEventListener('click', removeLocalData);\n\n\nbtnList.removeEventListener('click', onBtnClick);\nbtnList.addEventListener('click', onBtnClick);\n\nexport function onBtnClick(e) {\n  e.preventDefault();\n  key = e.target.id;\n  selectCurrentPage(key);\n  try {\n    const resp = localStorage.getItem(key);\n  parseResp = JSON.parse(resp);\n\n  if (!parseResp.length) {\n    clearList()\n    clearPagination();\n    fooError(key);\n  } else {\n    try {\n      clearError();\n      const data = createDataToRender(parseResp);\n      renderMoviesCards(data.results);\n      renderLibraryPagination(data.page, data.totalPages);\n\n      paginationBox.removeEventListener('click', handlerLibraryPagination);\n      paginationBox.addEventListener('click', handlerLibraryPagination);\n\n      hidePageLoadSpinner();\n    } catch (error) {\n      clearList()\n      clearPagination();\n      fooError(key);\n      hidePageLoadSpinner();\n    }\n  }\n  } catch (error) {\n    throw new Error(error)\n  }\n  \n}\nfunction clearPagination(){\n  paginationBox.innerHTML = '';\n}\nfunction clearError() {\n  librNoFilm.innerHTML = '';\n}\nfunction clearList() {\n  librList.innerHTML = '';\n}\nfunction fooError(key) {\n  return (librNoFilm.innerHTML = `\n  <img src=\"https://kartinkof.club/uploads/posts/2022-03/1648361803_4-kartinkof-club-p-mem-obezyana-smotrit-v-storonu-5.jpg\" alt=\"monkey\" width=\"400\" height=\"200\">\n  <p class=\"js-no_films__text\">Opss... you haven't added any movies to (${key})</p>\n`);\n}\n\nfunction selectCurrentPage(id) {\n  if (id === watched.id) {\n    queue.classList.remove('current-page');\n    watched.classList.add('current-page');\n    queue.removeAttribute('disabled');\n    watched.setAttribute('disabled', 'disabled');\n  }\n\n  if (id === queue.id) {\n    watched.classList.remove('current-page');\n    queue.classList.add('current-page');\n    watched.removeAttribute('disabled');\n    queue.setAttribute('disabled', 'disabled');\n  }\n}\n\n"],"names":["$14dc96e71a332ac5$var$parseResp","$98CTD","parcelRequire","$14dc96e71a332ac5$var$watched","document","querySelector","$14dc96e71a332ac5$var$queue","$14dc96e71a332ac5$var$btnList","$14dc96e71a332ac5$var$librNoFilm","$14dc96e71a332ac5$var$librList","$14dc96e71a332ac5$var$logo","$14dc96e71a332ac5$var$paginationBox","$14dc96e71a332ac5$var$WATCHED_KEY","$14dc96e71a332ac5$var$QUEUE_KEY","localStorage","getItem","setItem","JSON","stringify","$v4drH","hidePageLoadSpinner","$14dc96e71a332ac5$var$key","classList","add","$14dc96e71a332ac5$var$clearError","$14dc96e71a332ac5$var$resp","parse","length","$14dc96e71a332ac5$var$data","createDataToRender","renderMoviesCards","results","renderLibraryPagination","page","totalPages","removeEventListener","handlerLibraryPagination","addEventListener","error","$14dc96e71a332ac5$var$clearList","$14dc96e71a332ac5$var$clearPagination","$14dc96e71a332ac5$var$fooError","Error","$14dc96e71a332ac5$export$85806c12118d2fc","e","preventDefault","id","remove","removeAttribute","setAttribute","$14dc96e71a332ac5$var$selectCurrentPage","target","resp","data","error1","innerHTML","key1","concat","removeLocalData"],"version":3,"file":"library.f7ffc993.js.map"}