{"mappings":"YAAA,IAAMA,EAAWC,SAASC,cAAc,qBAClCC,EAAWF,SAASC,cAAc,wBAClCE,EAAgBH,SAASC,cAAc,uBAsB7C,SAASG,EAAeC,IAClBA,EAAIC,OAAOC,QAAQ,sBACrBF,EAAIC,OAAOC,QAAQ,2BACnBF,EAAIC,OAAOC,QAAQ,+BACnBF,EAAIC,OAAOC,QAAQ,yBACN,WAAbF,EAAIG,QACRN,EAASO,UAAUC,IAAI,aACnBV,SAASW,KAAKC,MAAMC,SAAW,OAmD1BV,EAAcW,UAAY,G,CAGnC,SAASC,EAAWC,GAChB,IAAMC,EAAcC,KAAKC,MAAMC,aAAaC,QAAQ,iBACpD,OAAOL,EAAaM,KAAI,SAAAC,G,OAAWN,EAAYM,E,IAAUC,KAAM,K,CAoCnE,SAASC,EAAmBC,GAE1B,OADkBR,KAAKC,MAAMC,aAAaC,QAAQ,mBAAqB,IACpDM,MAAK,SAAAC,G,OAAQA,EAAKC,KAAOH,EAAKG,E,IAAM,sBAAwB,gB,CAGjF,SAASC,EAAmBJ,GAE1B,OADgBR,KAAKC,MAAMC,aAAaC,QAAQ,iBAAmB,IAClDM,MAAK,SAAAC,G,OAAQA,EAAKC,KAAOH,EAAKG,E,IAAM,oBAAsB,c,CA9H7E9B,EAASgC,iBAAiB,SAG1B,SAAuB1B,GACvBH,EAASO,UAAUuB,OAAO,aACxBhC,SAASW,KAAKC,MAAMC,SAAW,SAE/B,IAAMoB,EAAS5B,EAAIC,OAAO4B,QAAQ,MAAML,GAElCM,EADYjB,KAAKC,MAAMC,aAAaC,QAAQ,iBACrBM,MAAK,SAAAD,G,OAAQA,EAAKG,KAAOO,OAAOH,E,IAuBlCP,EArBPS,EAsBVhC,EAAcW,UAAY,kGAKIuB,OAHYX,EAAKY,YAAY,0HAS5BD,OANDX,EAAKa,MAAM,+QAQTF,OAFDX,EAAKc,aAAa,gFAQzCH,OANwBX,EAAKe,WAAW,sMAUxCJ,OAJAK,KAAKC,MAAwB,GAAlBjB,EAAKkB,YAAiB,GAAG,8JAQpCP,OAJAX,EAAKmB,eAAe,qJAUxBR,OANItB,EAAWW,EAAKoB,WAAW,mLAUKT,OAJpCX,EAAKqB,SAAS,oIAKoBV,OADEZ,EAAmBC,GAAM,+DACFW,OAAzBP,EAAmBJ,GAAM,+CA3DzEX,EAAWoB,EAAWW,WA0ExB,SAA6BpB,GAC3B,IAAMsB,EAAehD,SAASC,cAAc,gBACtCgD,EAAWjD,SAASC,cAAc,cAElCiD,EAAc,gBACdC,EAAY,cAKlB,SAASC,IACP,IAAIC,EAAcnC,KAAKC,MAAMC,aAAaC,QAAQ,mBAAqB,GAClEgC,EAAY1B,MAAK,SAAAC,G,OAAQA,EAAKC,KAAOH,EAAKG,E,IAG7CwB,EAAcA,EAAYC,QAAO,SAAA1B,G,OAAQA,EAAKC,KAAOH,EAAKG,E,IAF1DwB,EAAYE,KAAK7B,GAInBN,aAAaoC,QAAQN,EAAahC,KAAKuC,UAAUJ,IACjDL,EAAaU,YAAcjC,EAAmBC,E,CAGhD,SAASiC,IACP,IAAIC,EAAY1C,KAAKC,MAAMC,aAAaC,QAAQ,iBAAmB,GAC9DuC,EAAUjC,MAAK,SAAAC,G,OAAQA,EAAKC,KAAOH,EAAKG,E,IAG3C+B,EAAYA,EAAUN,QAAO,SAAA1B,G,OAAQA,EAAKC,KAAOH,EAAKG,E,IAFtD+B,EAAUL,KAAK7B,GAIjBN,aAAaoC,QAAQL,EAAWjC,KAAKuC,UAAUG,IAC/CX,EAASS,YAAc5B,EAAmBJ,E,CAtB5CsB,EAAajB,iBAAiB,QAASqB,GACvCH,EAASlB,iBAAiB,QAAS4B,E,CAjFnCE,CAAoB1B,GAEpBnC,SAAS+B,iBAAiB,QAAS3B,GACnC0D,OAAO/B,iBAAiB,UAAW3B,GAgBrC,IAA6BsB,C","sources":["src/js/modalFilm/renderModalFIlmLibr.js"],"sourcesContent":["const librList = document.querySelector('.films__list-libr');\nconst backdrop = document.querySelector('.backdrop-modal-film');\nconst filmRendering = document.querySelector('.film-render-markup');\n\nlibrList.addEventListener(\"click\", openModalFilm);\n\n\nfunction openModalFilm(evt) {\nbackdrop.classList.remove(\"is-hidden\");\n  document.body.style.overflow = 'hidden';\n\n  const filmId = evt.target.closest(\"li\").id;\n  const filmArray = JSON.parse(localStorage.getItem(\"saved-movies\"));\n  const filmOpened = filmArray.find(film => film.id === Number(filmId));\n\n  renderModalFilmLibr(filmOpened);\n  findGenres(filmOpened.genre_ids);\n  localStorageHandler(filmOpened);\n\n  document.addEventListener(\"click\", closeModalFilm);\n  window.addEventListener(\"keydown\", closeModalFilm);\n\n}\n\nfunction closeModalFilm(evt) {\n  if (evt.target.matches(\".modal__close-btn\") ||\n    evt.target.matches(\".modal__close-btn-icon\") ||\n    evt.target.matches(\".modal__close-btn-icon-svg\") ||\n    evt.target.matches(\".backdrop-modal-film\") ||\n    evt.code === \"Escape\") {\nbackdrop.classList.add(\"is-hidden\");\n    document.body.style.overflow = 'auto';\n    clearModalFilm();\n  }\n}\n\nfunction renderModalFilmLibr(film) {\n    return (filmRendering.innerHTML = `\n        <div class=\"modal-img-wrapper\">\n          <img src=\"https://image.tmdb.org/t/p/w500/${film.poster_path}\" alt=\"film-poster\" />\n        </div>\n        <div class=\"modal__wrapper\">\n          <h2 class=\"modal__film-title\">${film.title}</h2>\n          <table class=\"modal__table\">\n            <tr class=\"modal__table-row\">\n              <td class=\"modal__first-column\">Vote / Votes</td>\n              <td>\n                <div class=\"modal__vote-wrapper\">\n                  <p class=\"modal__vote\">${film.vote_average}</p>\n                  <p>/</p>\n                  <p class=\"modal__votes\">${film.vote_count}</p>\n                </div>\n              </td>\n            </tr>\n            <tr class=\"modal__table-row\">\n              <td class=\"modal__first-column\">Popularity</td>\n              <td>${Math.round(film.popularity * 10)/10}</td>\n            </tr>\n            <tr class=\"modal__table-row\">\n              <td class=\"modal__first-column\">Original Title</td>\n              <td>${film.original_title}</td>\n            </tr>\n            <tr class=\"modal__table-row\">\n              <td class=\"modal__first-column\">Genre</td>\n              <td>${findGenres(film.genre_ids)}</td>\n            </tr>\n          </table>\n          <div>\n            <h3 class=\"modal__about-title\">About</h3>\n            <p class=\"modal__about-film\">\n              ${film.overview}\n            </p>\n          </div>\n          <div class=\"modal__buttons\">\n            <button class=\"modal-btn btn-watched\">${getWatchActionText(film)}</button>\n            <button class=\"modal-btn btn-queue\">${getQueueActiontext(film)}</button>\n          </div>\n        </div>`\n    )\n}\n\nfunction clearModalFilm() {\n  return filmRendering.innerHTML = \"\";\n}\n\nfunction findGenres(filmGenreIds) {\n    const savedGenres = JSON.parse(localStorage.getItem('saved-genres'));\n    return filmGenreIds.map(genreId => savedGenres[genreId]).join(`, `);\n} \n\nfunction localStorageHandler(film) {\n  const toWatchedBtn = document.querySelector(\".btn-watched\");\n  const queueBtn = document.querySelector(\".btn-queue\");\n\n  const WATCHED_KEY = \"watched-films\";\n  const QUEUE_KEY = \"queue-films\";\n\n  toWatchedBtn.addEventListener(\"click\", addToWatched);\n  queueBtn.addEventListener(\"click\", addToQueue);\n\n  function addToWatched() {\n    let watchedData = JSON.parse(localStorage.getItem(\"watched-films\")) || [];\n    if (!watchedData.find(item => item.id === film.id)) {\n      watchedData.push(film);\n    } else {\n      watchedData = watchedData.filter(item => item.id !== film.id);\n    }\n    localStorage.setItem(WATCHED_KEY, JSON.stringify(watchedData));\n    toWatchedBtn.textContent = getWatchActionText(film);\n  }\n\n  function addToQueue() {\n    let queueData = JSON.parse(localStorage.getItem(\"queue-films\")) || [];\n    if (!queueData.find(item => item.id === film.id)) {\n      queueData.push(film);\n    } else {\n      queueData = queueData.filter(item => item.id !== film.id);\n    }\n    localStorage.setItem(QUEUE_KEY, JSON.stringify(queueData));\n    queueBtn.textContent = getQueueActiontext(film);\n  }\n}\n\nfunction getWatchActionText(film) {\n  let watchedData = JSON.parse(localStorage.getItem(\"watched-films\")) || [];\n  return watchedData.find(item => item.id === film.id) ? \"REMOVE FROM WATCHED\" : \"ADD TO WATCHED\";\n}\n\nfunction getQueueActiontext(film) {\n  let queueData = JSON.parse(localStorage.getItem(\"queue-films\")) || [];\n  return queueData.find(item => item.id === film.id) ? \"REMOVE FROM QUEUE\" : \"ADD TO QUEUE\";\n}"],"names":["$7b02be421d0252f8$var$librList","document","querySelector","$7b02be421d0252f8$var$backdrop","$7b02be421d0252f8$var$filmRendering","$7b02be421d0252f8$var$closeModalFilm","evt","target","matches","code","classList","add","body","style","overflow","innerHTML","$7b02be421d0252f8$var$findGenres","filmGenreIds","savedGenres","JSON","parse","localStorage","getItem","map","genreId","join","$7b02be421d0252f8$var$getWatchActionText","film","find","item","id","$7b02be421d0252f8$var$getQueueActiontext","addEventListener","remove","filmId","closest","filmOpened","Number","concat","poster_path","title","vote_average","vote_count","Math","round","popularity","original_title","genre_ids","overview","toWatchedBtn","queueBtn","WATCHED_KEY","QUEUE_KEY","addToWatched","watchedData","filter","push","setItem","stringify","textContent","addToQueue","queueData","$7b02be421d0252f8$var$localStorageHandler","window"],"version":3,"file":"library.270c493c.js.map"}