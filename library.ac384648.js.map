{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BAUA,IAAIC,EAAoB,EAExB,MAAMC,EAAUC,SAASC,cAAc,kBACjCC,EAAQF,SAASC,cAAc,gBAC/BE,EAAUH,SAASC,cAAc,gBACjCG,EAAWJ,SAASC,cAAc,gBAClCI,EAAOL,SAASC,cAAc,cAC9BK,EAAgBN,SAASC,cAAc,sBAKH,OAAtCM,aAAaC,QAHG,mBAIlBD,aAAaE,QAJK,gBAIgBC,KAAKC,UAAU,MACjD,EAAAC,EAAAC,wBAGsC,OAApCN,aAAaC,QAPC,iBAQhBD,aAAaE,QARG,cAQgBC,KAAKC,UAAU,MAC/C,EAAAC,EAAAC,wBAGF,IAAIC,EAAM,cAEVZ,EAAMa,UAAUC,IAAI,gBACpB,IACE,MAAMC,EAAOV,aAAaC,QAAQM,GACpC,IAAII,EAAYR,KAAKS,MAAMF,GAC3B,GAAKC,EAAUE,OAIb,IACE,MAAMC,EAAOC,EAAmBJ,GAEhCK,QAAQC,IAAIH,EAAKI,UAEjB,EAAA7B,EAAA8B,mBAAkBL,EAAKI,SACvBE,EAAwBN,EAAKO,KAAMP,EAAKQ,YAExCvB,EAAcwB,oBAAoB,QAASC,GAC3CzB,EAAc0B,iBAAiB,QAASD,IAExC,EAAAnB,EAAAC,sB,CACA,MAAOoB,GACPC,EAASpB,IACT,EAAAF,EAAAC,sB,MAjBFqB,EAASpB,IACT,EAAAF,EAAAC,sB,CAmBA,MAAOoB,GACP,MAAM,IAAIE,MAAMF,E,CAUX,SAASG,EAAWC,GACzBA,EAAEC,iBACFxB,EAAMuB,EAAEE,OAAOC,GAqCjB,SAA2BA,GACrBA,IAAOzC,EAAQyC,KACjBtC,EAAMa,UAAU0B,OAAO,gBACvB1C,EAAQgB,UAAUC,IAAI,gBACtBd,EAAMwC,gBAAgB,YACtB3C,EAAQ4C,aAAa,WAAY,aAG/BH,IAAOtC,EAAMsC,KACfzC,EAAQgB,UAAU0B,OAAO,gBACzBvC,EAAMa,UAAUC,IAAI,gBACpBjB,EAAQ2C,gBAAgB,YACxBxC,EAAMyC,aAAa,WAAY,Y,CAhDjCC,CAAkB9B,GAClB,IACE,MAAMG,EAAOV,aAAaC,QAAQM,GAGpC,GAFAI,UAAYR,KAAKS,MAAMF,GAElBC,UAAUE,OAGb,IACE,MAAMC,EAAOC,EAAmBJ,WAChCK,QAAQC,IAAIH,EAAKI,UACjB,EAAA7B,EAAA8B,mBAAkBL,EAAKI,SACvBE,EAAwBN,EAAKO,KAAMP,EAAKQ,YAExCvB,EAAcwB,oBAAoB,QAASC,GAC3CzB,EAAc0B,iBAAiB,QAASD,IAExC,EAAAnB,EAAAC,sB,CACA,MAAOoB,GACPC,EAASpB,IACT,EAAAF,EAAAC,sB,MAdFqB,EAASpB,E,CAiBT,MAAO+B,GACP,MAAM,IAAIV,MAAMU,E,EAKpB,SAASX,EAASY,GAChB,OAAQ1C,EAAS2C,UAAY,wNAEiBD,U,CAoBhD,SAASxB,EAAmBD,EAAM2B,EAAU,GAC1C,MAAMC,EAAa5B,EAAKD,OAClB8B,EAAa,GAEnB,IAAK,IAAIC,EAAoB,IAAfH,EAAU,GAASG,EAAoB,IAAfH,EAAU,GAAU,GAAIG,IACvD9B,EAAK8B,IAGVD,EAAWE,KAAK/B,EAAK8B,IASvB,MANoB,CAClB1B,QAASyB,EACTrB,WAAYwB,KAAKC,KAAKL,EAAa,IACnCrB,KAAMoB,E,CAMV,SAASjB,EAAyBwB,GAChC,SAASC,EAAoBR,IAC3B,EAAApC,EAAA6C,mBACA,MAAMpC,EAAOC,EAAmBJ,UAAW8B,GAC3CzB,QAAQC,IAAIH,EAAKI,UACjB,EAAA7B,EAAA8B,mBAAkBL,EAAKI,UACvB,EAAAb,EAAA8C,eACA/B,EAAwBN,EAAKO,KAAMP,EAAKsC,Y,CAG1C,GAA4B,OAAxBJ,EAAIhB,OAAOqB,SACb,OAEF,GAA+B,QAA3BL,EAAIhB,OAAOsB,YACb,OAEF,GAA+B,OAA3BN,EAAIhB,OAAOsB,YAEb,YADGL,EAAkB1D,GAAqB,GAG5C,GAA+B,OAA3ByD,EAAIhB,OAAOsB,YAEb,YADAL,EAAqB1D,GAAqB,GAI5C0D,EADaD,EAAIhB,OAAOsB,Y,CAI1B,SAASlC,EAAwBmC,EAAaC,GAC5C,IAAIC,EAAS,GAKblE,EAAoBgE,EAEhBA,EAAc,IAChBE,GAAU,sDACVA,GAAU,+CAGRF,EAAc,IAChBE,GAAU,0CAGRF,EAAc,IAChBE,GAAU,wCAhBQF,EAAc,UAmB9BA,EAAc,IAChBE,GAAU,wCAnBKF,EAAc,UAsB/BE,GAAU,wDAAwDF,aAE9DC,EAAW,EAAID,IACjBE,GAAU,wCAxBIF,EAAc,UA2B1BC,EAAW,EAAID,IACjBE,GAAU,wCA3BOF,EAAc,UA8B7BC,EAAW,EAAID,IACjBE,GAAU,0CAGRD,EAAWD,IACbE,GAAU,wCAAwCD,SAClDC,GAAU,uDAGZ1D,EAAcyC,UAAYiB,C,CA1J5B3D,EAAKyB,oBAAoB,QAASlB,EAAAqD,iBAClC5D,EAAK2B,iBAAiB,QAASpB,EAAAqD,iBAG/B9D,EAAQ2B,oBAAoB,QAASM,GACrCjC,EAAQ6B,iBAAiB,QAASI,G","sources":["src/js/renderQueueWatchedFilms/renderQueueWachedFilms.js"],"sourcesContent":["import { renderMoviesCards } from '../createMoviesMarkup/renderMoviesCards';\n\nimport { hidePageLoadSpinner, removeLocalData } from '../common/common';\nimport {\n  hidePageLoadSpinner,\n  removeLocalData,\n  showLoadSpinner,\n  hideLoadSpinner,\n  scrollToTop,\n} from '../common/common';\nlet globalCurrentPage = 0;\n\nconst watched = document.querySelector('.watched-films');\nconst queue = document.querySelector('.queue-films');\nconst btnList = document.querySelector('.button-list');\nconst librList = document.querySelector('.films__list');\nconst logo = document.querySelector('.logo-link');\nconst paginationBox = document.querySelector('.page-number__list');\n\nconst WATCHED_KEY = 'watched-films';\nconst QUEUE_KEY = 'queue-films';\n\nif (localStorage.getItem(WATCHED_KEY) === null) {\n  localStorage.setItem(WATCHED_KEY, JSON.stringify([]));\n  hidePageLoadSpinner();\n}\n\nif (localStorage.getItem(QUEUE_KEY) === null) {\n  localStorage.setItem(QUEUE_KEY, JSON.stringify([]));\n  hidePageLoadSpinner();\n}\n\nlet key = 'queue-films';\n\nqueue.classList.add('current-page');\ntry {\n  const resp = localStorage.getItem(key);\nlet parseResp = JSON.parse(resp);\nif (!parseResp.length) {\n  fooError(key);\n  hidePageLoadSpinner();\n} else {\n  try {\n    const data = createDataToRender(parseResp);\n\n    console.log(data.results);\n\n    renderMoviesCards(data.results);\n    renderLibraryPagination(data.page, data.totalPages);\n\n    paginationBox.removeEventListener('click', handlerLibraryPagination);\n    paginationBox.addEventListener('click', handlerLibraryPagination);\n\n    hidePageLoadSpinner();\n  } catch (error) {\n    fooError(key);\n    hidePageLoadSpinner();\n  }\n}\n} catch (error) {\n  throw new Error(error);\n}\n\nlogo.removeEventListener('click', removeLocalData);\nlogo.addEventListener('click', removeLocalData);\n\n\nbtnList.removeEventListener('click', onBtnClick);\nbtnList.addEventListener('click', onBtnClick);\n\nexport function onBtnClick(e) {\n  e.preventDefault();\n  key = e.target.id;\n  selectCurrentPage(key);\n  try {\n    const resp = localStorage.getItem(key);\n  parseResp = JSON.parse(resp);\n\n  if (!parseResp.length) {\n    fooError(key);\n  } else {\n    try {\n      const data = createDataToRender(parseResp);\n      console.log(data.results);\n      renderMoviesCards(data.results);\n      renderLibraryPagination(data.page, data.totalPages);\n\n      paginationBox.removeEventListener('click', handlerLibraryPagination);\n      paginationBox.addEventListener('click', handlerLibraryPagination);\n\n      hidePageLoadSpinner();\n    } catch (error) {\n      fooError(key);\n      hidePageLoadSpinner();\n    }\n  }\n  } catch (error) {\n    throw new Error(error)\n  }\n  \n}\n\nfunction fooError(key) {\n  return (librList.innerHTML = `\n  <img src=\"https://kartinkof.club/uploads/posts/2022-03/1648361803_4-kartinkof-club-p-mem-obezyana-smotrit-v-storonu-5.jpg\" alt=\"monkey\" width=\"400\" height=\"200\">\n  <p>Opss... you haven't added any movies to (${key})</p>\n`);\n}\n\nfunction selectCurrentPage(id) {\n  if (id === watched.id) {\n    queue.classList.remove('current-page');\n    watched.classList.add('current-page');\n    queue.removeAttribute('disabled');\n    watched.setAttribute('disabled', 'disabled');\n  }\n\n  if (id === queue.id) {\n    watched.classList.remove('current-page');\n    queue.classList.add('current-page');\n    watched.removeAttribute('disabled');\n    queue.setAttribute('disabled', 'disabled');\n  }\n}\n\nfunction createDataToRender(data, pageNum = 1) {\n  const dataLength = data.length;\n  const resultsArr = [];\n\n  for (let i = (pageNum - 1) * 20; i < (pageNum - 1) * 20 + 20; i++) {\n    if (!data[i]) {\n      continue;\n    }\n    resultsArr.push(data[i]);\n  }\n\n  const objToRender = {\n    results: resultsArr,\n    totalPages: Math.ceil(dataLength / 20),\n    page: pageNum,\n  };\n\n  return objToRender;\n}\n\nfunction handlerLibraryPagination(evt) {\n  function renderNewMoviesPage(pageNum) {\n    showLoadSpinner();\n    const data = createDataToRender(parseResp, pageNum);\n    console.log(data.results);\n    renderMoviesCards(data.results);\n    scrollToTop();\n    renderLibraryPagination(data.page, data.total_pages);\n\n  }\n  if (evt.target.nodeName !== 'LI') {\n    return;\n  }\n  if (evt.target.textContent === '...') {\n    return;\n  }\n  if (evt.target.textContent === 'ðŸ¡¸') {\n    renderNewMoviesPage((globalCurrentPage -= 1));\n    return;\n  }\n  if (evt.target.textContent === 'ðŸ¡º') {\n    renderNewMoviesPage((globalCurrentPage += 1));\n    return;\n  }\n  const page = evt.target.textContent;\n  renderNewMoviesPage(page);\n}\n\nfunction renderLibraryPagination(currentPage, allPages) {\n  let markup = '';\n  let beforeTwoPage = currentPage - 2;\n  let beforePage = currentPage - 1;\n  let afterPage = currentPage + 1;\n  let afterTwoPage = currentPage + 2;\n  globalCurrentPage = currentPage;\n\n  if (currentPage > 1) {\n    markup += `<li class=\"page-number__item arrows\">&#129144;</li>`;\n    markup += `<li class=\"page-number__item number\">1</li>`;\n  }\n\n  if (currentPage > 4) {\n    markup += `<li class=\"page-number__item\">...</li>`;\n  }\n\n  if (currentPage > 3) {\n    markup += `<li class=\"page-number__item number\">${beforeTwoPage}</li>`;\n  }\n\n  if (currentPage > 2) {\n    markup += `<li class=\"page-number__item number\">${beforePage}</li>`;\n  }\n\n  markup += `<li class=\"page-number__item current_page number\"><b>${currentPage}</b></li>`;\n\n  if (allPages - 1 > currentPage) {\n    markup += `<li class=\"page-number__item number\">${afterPage}</li>`;\n  }\n\n  if (allPages - 2 > currentPage) {\n    markup += `<li class=\"page-number__item number\">${afterTwoPage}</li>`;\n  }\n\n  if (allPages - 3 > currentPage) {\n    markup += `<li class=\"page-number__item\">...</li>`;\n  }\n\n  if (allPages > currentPage) {\n    markup += `<li class=\"page-number__item number\">${allPages}</li>`;\n    markup += `<li class=\"page-number__item arrows\">&#129146;</li>`;\n  }\n\n  paginationBox.innerHTML = markup;\n}\n"],"names":["$eyj3e","parcelRequire","$3aa6467ffa2597ff$var$globalCurrentPage","$3aa6467ffa2597ff$var$watched","document","querySelector","$3aa6467ffa2597ff$var$queue","$3aa6467ffa2597ff$var$btnList","$3aa6467ffa2597ff$var$librList","$3aa6467ffa2597ff$var$logo","$3aa6467ffa2597ff$var$paginationBox","localStorage","getItem","setItem","JSON","stringify","$kyFpU","hidePageLoadSpinner","$3aa6467ffa2597ff$var$key","classList","add","resp","parseResp","parse","length","data","$3aa6467ffa2597ff$var$createDataToRender","console","log","results","renderMoviesCards","$3aa6467ffa2597ff$var$renderLibraryPagination","page","totalPages","removeEventListener","$3aa6467ffa2597ff$var$handlerLibraryPagination","addEventListener","error","$3aa6467ffa2597ff$var$fooError","Error","$3aa6467ffa2597ff$export$85806c12118d2fc","e","preventDefault","target","id","remove","removeAttribute","setAttribute","$3aa6467ffa2597ff$var$selectCurrentPage","error1","key1","innerHTML","pageNum","dataLength","resultsArr","i","push","Math","ceil","evt","renderNewMoviesPage","showLoadSpinner","scrollToTop","total_pages","nodeName","textContent","currentPage","allPages","markup","removeLocalData"],"version":3,"file":"library.ac384648.js.map"}