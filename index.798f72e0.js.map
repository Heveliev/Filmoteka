{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAyEA,SAASC,EAAWC,GAChB,MAAMC,EAAcC,KAAKC,MAAMC,aAAaC,QAAQ,iBACpD,OAAOC,WAAaN,EAAaO,KAAIC,GAAWP,EAAYO,KAAUC,KAAK,K,CAoC/E,SAASC,EAAmBC,GAE1B,OADkBT,KAAKC,MAAMC,aAAaC,QAAQ,mBAAqB,IACpDO,MAAKC,GAAQA,EAAKC,KAAOH,EAAKG,KAAM,sBAAwB,gB,CAGjF,SAASC,EAAmBJ,GAE1B,OADgBT,KAAKC,MAAMC,aAAaC,QAAQ,iBAAmB,IAClDO,MAAKC,GAAQA,EAAKC,KAAOH,EAAKG,KAAM,oBAAsB,c,CAjH7EjB,EAAAmB,KAAKC,SAASC,iBAAiB,SAG/B,SAAuBC,GACrBtB,EAAAmB,KAAKI,SAASC,UAAUC,OAAO,aAC/B,MAAMC,EAASJ,EAAIK,OAAOC,QAAQ,MAAMX,GAElCY,EADYxB,KAAKC,MAAMC,aAAaC,QAAQ,iBACrBO,MAAKD,GAAQA,EAAKG,KAAOa,OAAOJ,KAYtCZ,EAVPe,EAWN7B,EAAAmB,KAAKY,cAAcC,UAAY,kGAEWlB,EAAKmB,oIAGjBnB,EAAKoB,mRAMJpB,EAAKqB,2FAEJrB,EAAKsB,+MAM7BC,KAAKC,MAAMxB,EAAKyB,wKAIhBzB,EAAK0B,kKAILtC,EAAWY,EAAK2B,4LAMpB3B,EAAK4B,2IAI+B7B,EAAmBC,gEACrBI,EAAmBJ,gDAhDnEZ,EAAW2B,EAAWY,WA+DxB,SAA6B3B,GAC3B,MAAM6B,EAAeC,SAASC,cAAc,gBACtCC,EAAWF,SAASC,cAAc,cAElCE,EAAc,gBACdC,EAAY,cAKlB,SAASC,IACP,IAAIC,EAAc7C,KAAKC,MAAMC,aAAaC,QAAQ,mBAAqB,GAClE0C,EAAYnC,MAAKC,GAAQA,EAAKC,KAAOH,EAAKG,KAG7CiC,EAAcA,EAAYC,QAAOnC,GAAQA,EAAKC,KAAOH,EAAKG,KAF1DiC,EAAYE,KAAKtC,GAInBP,aAAa8C,QAAQN,EAAa1C,KAAKiD,UAAUJ,IACjDP,EAAaY,YAAc1C,EAAmBC,E,CAGhD,SAAS0C,IACP,IAAIC,EAAYpD,KAAKC,MAAMC,aAAaC,QAAQ,iBAAmB,GAC9DiD,EAAU1C,MAAKC,GAAQA,EAAKC,KAAOH,EAAKG,KAG3CwC,EAAYA,EAAUN,QAAOnC,GAAQA,EAAKC,KAAOH,EAAKG,KAFtDwC,EAAUL,KAAKtC,GAIjBP,aAAa8C,QAAQL,EAAW3C,KAAKiD,UAAUG,IAC/CX,EAASS,YAAcrC,EAAmBJ,E,CAtB5C6B,EAAatB,iBAAiB,QAAS4B,GACvCH,EAASzB,iBAAiB,QAASmC,E,CAtEnCE,CAAoB7B,GAQtB,IAAyBf,C,IAlBzBd,EAAAmB,KAAKwC,SAAStC,iBAAiB,SAa/B,WACErB,EAAAmB,KAAKI,SAASC,UAAUoC,IAAI,aAkDrB5D,EAAAmB,KAAKY,cAAcC,UAAY,E","sources":["src/js/modalFilm/renderModalFilm.js"],"sourcesContent":["import {refs} from '../refs/refs';\n\n\n\n\nrefs.filmCard.addEventListener(\"click\", openModalFilm);\nrefs.closeBtn.addEventListener(\"click\", closeModalFilm);\n\nfunction openModalFilm(evt) {\n  refs.backdrop.classList.remove(\"is-hidden\");\n  const filmId = evt.target.closest(\"li\").id;\n  const filmArray = JSON.parse(localStorage.getItem(\"saved-movies\"));\n  const filmOpened = filmArray.find(film => film.id === Number(filmId));\n\n  renderModalFilm(filmOpened);\n  findGenres(filmOpened.genre_ids);\n  localStorageHandler(filmOpened);\n}\n\nfunction closeModalFilm() {\n  refs.backdrop.classList.add(\"is-hidden\");\n  clearModelFilm();\n}\n\nfunction renderModalFilm(film) {\n    return (refs.filmRendering.innerHTML = `\n        <div class=\"modal-img-wrapper\">\n          <img src=\"https://image.tmdb.org/t/p/w500/${film.poster_path}\" alt=\"film-poster\" />\n        </div>\n        <div class=\"modal__wrapper\">\n          <h2 class=\"modal__film-title\">${film.title}</h2>\n          <table class=\"modal__table\">\n            <tr class=\"modal__table-row\">\n              <td class=\"modal__first-column\">Vote / Votes</td>\n              <td>\n                <div class=\"modal__vote-wrapper\">\n                  <p class=\"modal__vote\">${film.vote_average}</p>\n                  <p>/</p>\n                  <p class=\"modal__votes\">${film.vote_count}</p>\n                </div>\n              </td>\n            </tr>\n            <tr class=\"modal__table-row\">\n              <td class=\"modal__first-column\">Popularity</td>\n              <td>${Math.round(film.popularity)}</td>\n            </tr>\n            <tr class=\"modal__table-row\">\n              <td class=\"modal__first-column\">Original Title</td>\n              <td>${film.original_title}</td>\n            </tr>\n            <tr class=\"modal__table-row\">\n              <td class=\"modal__first-column\">Genre</td>\n              <td>${findGenres(film.genre_ids)}</td>\n            </tr>\n          </table>\n          <div>\n            <h3 class=\"modal__about-title\">About</h3>\n            <p class=\"modal__about-film\">\n              ${film.overview}\n            </p>\n          </div>\n          <div class=\"modal__buttons\">\n            <button class=\"modal-btn btn-watched\">${getWatchActionText(film)}</button>\n            <button class=\"modal-btn btn-queue\">${getQueueActiontext(film)}</button>\n          </div>\n        </div>`\n    )\n}\n\nfunction clearModelFilm() {\n  return refs.filmRendering.innerHTML = \"\";\n}\n\nfunction findGenres(filmGenreIds) {\n    const savedGenres = JSON.parse(localStorage.getItem('saved-genres'));\n    return textGenres = filmGenreIds.map(genreId => savedGenres[genreId]).join(`, `);\n} \n\nfunction localStorageHandler(film) {\n  const toWatchedBtn = document.querySelector(\".btn-watched\");\n  const queueBtn = document.querySelector(\".btn-queue\");\n\n  const WATCHED_KEY = \"watched-films\";\n  const QUEUE_KEY = \"queue-films\";\n\n  toWatchedBtn.addEventListener(\"click\", addToWatched);\n  queueBtn.addEventListener(\"click\", addToQueue);\n\n  function addToWatched() {\n    let watchedData = JSON.parse(localStorage.getItem(\"watched-films\")) || [];\n    if (!watchedData.find(item => item.id === film.id)) {\n      watchedData.push(film);\n    } else {\n      watchedData = watchedData.filter(item => item.id !== film.id);\n    }\n    localStorage.setItem(WATCHED_KEY, JSON.stringify(watchedData));\n    toWatchedBtn.textContent = getWatchActionText(film);\n  }\n\n  function addToQueue() {\n    let queueData = JSON.parse(localStorage.getItem(\"queue-films\")) || [];\n    if (!queueData.find(item => item.id === film.id)) {\n      queueData.push(film);\n    } else {\n      queueData = queueData.filter(item => item.id !== film.id);\n    }\n    localStorage.setItem(QUEUE_KEY, JSON.stringify(queueData));\n    queueBtn.textContent = getQueueActiontext(film);\n  }\n}\n\nfunction getWatchActionText(film) {\n  let watchedData = JSON.parse(localStorage.getItem(\"watched-films\")) || [];\n  return watchedData.find(item => item.id === film.id) ? \"REMOVE FROM WATCHED\" : \"ADD TO WATCHED\";\n}\n\nfunction getQueueActiontext(film) {\n  let queueData = JSON.parse(localStorage.getItem(\"queue-films\")) || [];\n  return queueData.find(item => item.id === film.id) ? \"REMOVE FROM QUEUE\" : \"ADD TO QUEUE\";\n}\n\n\n"],"names":["$3ILHO","parcelRequire","$19d7d5247f356a90$var$findGenres","filmGenreIds","savedGenres","JSON","parse","localStorage","getItem","textGenres","map","genreId","join","$19d7d5247f356a90$var$getWatchActionText","film","find","item","id","$19d7d5247f356a90$var$getQueueActiontext","refs","filmCard","addEventListener","evt","backdrop","classList","remove","filmId","target","closest","filmOpened","Number","filmRendering","innerHTML","poster_path","title","vote_average","vote_count","Math","round","popularity","original_title","genre_ids","overview","toWatchedBtn","document","querySelector","queueBtn","WATCHED_KEY","QUEUE_KEY","addToWatched","watchedData","filter","push","setItem","stringify","textContent","addToQueue","queueData","$19d7d5247f356a90$var$localStorageHandler","closeBtn","add"],"version":3,"file":"index.798f72e0.js.map"}