const e={moviesList:document.querySelector(".films__list")};function t(t){return e.moviesList.innerHTML=t.map((e=>{return`<li id='${e.id}' class="films__card">\n            <div class="films__overflow-wrapper">\n              <img src="${t=e.poster_path,t?`https://image.tmdb.org/t/p/w500/${t}`:"https://i.postimg.cc/KYV47028/no-poster-available.jpg"}"  alt="film poster" class="films__picture" />\n              <div class="films__overlay">\n                <p class="films__trailer-text">Watch trailer</p>\n                <img scr alt class="films__trailer-icon">\n              </div>\n            </div>\n            <p class="films__title">${e.title}</p>\n            <div class="films__details">\n              <p class="films__genres film-font-style">${function(e){try{const t=localStorage.getItem("saved-genres"),r=JSON.parse(t);let n=[];const s=e.release_date.slice(0,4);for(let t=0;t<e.genre_ids.length;t++)n.push(r[e.genre_ids[t]]);let l="";return l=n.length>2?n.splice(0,2).join(", ")+", Other":n.join(", "),0!==e.genre_ids.length||e.release_date?0===e.genre_ids.length&&e.release_date?s:0===e.genre_ids.length||e.release_date?l+" | "+s:l:""}catch(e){throw new Error(e)}}(e)}</p>\n              <span class="films__rate">${e.vote_average.toFixed(1)}</span>\n            </div>\n          </li>`;var t})).join("")}const r={loader:document.querySelector(".loader")};function n(){localStorage.removeItem("saved-data")}function s(){r.loader.classList.remove("page-load"),r.loader.classList.add("hide")}const l=document.querySelector(".watched-films"),a=document.querySelector(".queue-films"),o=document.querySelector(".button-list"),i=document.querySelector(".films__list"),c=document.querySelector(".logo-link");null===localStorage.getItem("watched-films")&&(localStorage.setItem("watched-films",JSON.stringify([])),s()),null===localStorage.getItem("queue-films")&&(localStorage.setItem("queue-films",JSON.stringify([])),s());let d="queue-films";a.classList.add("current-page");try{const e=localStorage.getItem(d),r=JSON.parse(e);if(r.length)try{t(r),s()}catch(e){u(d),s()}else u(d),s()}catch(e){throw new Error(e)}function m(e){e.preventDefault();try{d=e.target.id,function(e){e===l.id&&(a.classList.remove("current-page"),l.classList.add("current-page"),a.removeAttribute("disabled"),l.setAttribute("disabled","disabled"));e===a.id&&(l.classList.remove("current-page"),a.classList.add("current-page"),l.removeAttribute("disabled"),a.setAttribute("disabled","disabled"))}(d);const r=localStorage.getItem(d),n=JSON.parse(r);if(n.length)try{t(n)}catch(e){u(d)}else u(d)}catch(e){throw new Error(e)}}function u(e){return i.innerHTML=`\n  <img src="https://kartinkof.club/uploads/posts/2022-03/1648361803_4-kartinkof-club-p-mem-obezyana-smotrit-v-storonu-5.jpg" alt="monkey" width="400" height="200">\n  <p>Opss... you haven't added any movies to (${e})</p>\n`}c.removeEventListener("click",n),c.addEventListener("click",n),o.removeEventListener("click",m),o.addEventListener("click",m);const g={filmCard:document.querySelector(".films__list"),backdrop:document.querySelector(".backdrop-modal-film"),filmRendering:document.querySelector(".film-render-markup")},_=document.querySelector("#js-libr"),f=document.querySelector("#queue-films"),p=document.querySelector("#watched-films");function v(e){if("IMG"===e.target.nodeName){g.backdrop.classList.remove("is-hidden"),document.body.style.overflow="hidden";const n=e.target.closest("li").id;try{const e=JSON.parse(localStorage.getItem("saved-movies")).find((e=>e.id===Number(n)));r=e,g.filmRendering.innerHTML=`\n        <div class="modal-img-wrapper">\n          <img src="https://image.tmdb.org/t/p/w500/${r.poster_path}" alt="film-poster" />\n        </div>\n        <div class="modal__wrapper">\n          <h2 class="modal__film-title">${r.title}</h2>\n          <table class="modal__table">\n            <tr class="modal__table-row">\n              <td class="modal__first-column">Vote / Votes</td>\n              <td>\n                <div class="modal__vote-wrapper">\n                  <p class="modal__vote">${r.vote_average.toFixed(1)}</p>\n                  <p>/</p>\n                  <p class="modal__votes">${r.vote_count}</p>\n                </div>\n              </td>\n            </tr>\n            <tr class="modal__table-row">\n              <td class="modal__first-column">Popularity</td>\n              <td>${Math.round(10*r.popularity)/10}</td>\n            </tr>\n            <tr class="modal__table-row">\n              <td class="modal__first-column">Original Title</td>\n              <td>${r.original_title}</td>\n            </tr>\n            <tr class="modal__table-row">\n              <td class="modal__first-column">Genre</td>\n              <td>${b(r.genre_ids)}</td>\n            </tr>\n          </table>\n          <div>\n            <h3 class="modal__about-title">About</h3>\n            <p class="modal__about-film">\n              ${r.overview}\n            </p>\n          </div>\n          <div class="modal__buttons">\n            <button class="modal-btn btn-watched">${w(r)}</button>\n            <button class="modal-btn btn-queue">${y(r)}</button>\n          </div>\n        </div>`,b(e.genre_ids),function(e){const r=document.querySelector(".btn-watched"),n=document.querySelector(".btn-queue"),s="watched-films",l="queue-films";function a(){try{let n=JSON.parse(localStorage.getItem("watched-films"))||[];n.find((t=>t.id===e.id))?n=n.filter((t=>t.id!==e.id)):n.push(e),localStorage.setItem(s,JSON.stringify(n)),r.textContent=w(e),_.classList.contains("current")&&p.classList.contains("current-page")&&t(n)}catch(e){throw new Error(e)}}function o(){try{let r=JSON.parse(localStorage.getItem("queue-films"))||[];r.find((t=>t.id===e.id))?r=r.filter((t=>t.id!==e.id)):r.push(e),localStorage.setItem(l,JSON.stringify(r)),n.textContent=y(e),_.classList.contains("current")&&f.classList.contains("current-page")&&t(r)}catch(e){throw new Error(e)}}r.removeEventListener("click",a),n.removeEventListener("click",o),r.addEventListener("click",a),n.addEventListener("click",o)}(e)}catch(e){throw new Error(e)}document.removeEventListener("click",h),window.removeEventListener("keydown",h),document.addEventListener("click",h),window.addEventListener("keydown",h)}var r}function h(e){(e.target.matches(".modal__close-btn")||e.target.matches(".modal__close-btn-icon")||e.target.matches(".modal__close-btn-icon-svg")||e.target.matches(".backdrop-modal-film")||"Escape"===e.code)&&(g.backdrop.classList.add("is-hidden"),document.body.style.overflow="auto",g.filmRendering.innerHTML="")}function b(e){try{const t=JSON.parse(localStorage.getItem("saved-genres"));return e.map((e=>t[e])).join(", ")}catch(e){throw new Error(e)}}function w(e){try{return(JSON.parse(localStorage.getItem("watched-films"))||[]).find((t=>t.id===e.id))?"REMOVE FROM WATCHED":"ADD TO WATCHED"}catch(e){throw new Error(e)}}function y(e){try{return(JSON.parse(localStorage.getItem("queue-films"))||[]).find((t=>t.id===e.id))?"REMOVE FROM QUEUE":"ADD TO QUEUE"}catch(e){throw new Error(e)}}g.filmCard.removeEventListener("click",v),g.filmCard.addEventListener("click",v);
//# sourceMappingURL=library.4f671337.js.map
